<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Auction">

<select id="count" resultType="int">
	select count(*) from Deal_Auction
</select>


<insert id="insert" parameterType="Auction">
	insert into Deal_Auction
	(AUC_NUMBER, AUC_SUBJECT , AUC_PRICE , AUC_LPRICE , AUC_UNIT ,
	AUC_CONTENT,AUC_DELIVERY, AUC_DATE ,USER_ID,
	ORI_AUC_MAINFILE , SAVE_AUC_MAINFILE ,
	ORI_AUC_FILE2 ,SAVE_AUC_FILE2 ,
	 ORI_AUC_FILE3 ,SAVE_AUC_FILE3 ,
	 ORI_AUC_FILE4 , SAVE_AUC_FILE4 ,
	 AUC_SPRICE)
	VALUES( AUC_SEQ.NEXTVAL , #{AUC_SUBJECT} , #{AUC_PRICE} ,
			#{AUC_LPRICE} , #{AUC_UNIT},
			#{AUC_CONTENT} , #{AUC_DELIVERY},
			#{AUC_DATE} , #{USER_ID} ,
			#{ORI_AUC_MAINFILE} , #{SAVE_AUC_MAINFILE} ,
			#{ORI_AUC_FILE2} , #{SAVE_AUC_FILE2} ,
			#{ORI_AUC_FILE3} , #{SAVE_AUC_FILE3} ,
			#{ORI_AUC_FILE4} , #{SAVE_AUC_FILE4},
			#{AUC_PRICE})
	


</insert>

<select id="list" parameterType="java.util.Map" resultType="Auction">
select * from
	(select rownum rnum , 	AUC_NUMBER , AUC_SUBJECT , AUC_DATE
	AUC_PRICE ,AUC_COUNT ,SAVE_AUC_MAINFILE  ,AUC_SPRICE
		from(
		select * from Deal_Auction
		order by AUC_NUMBER desc))
	 where rnum &gt;= #{start} and rnum  &lt;=  #{end}
	</select>

<select id = "searchlist" parameterType="java.util.Map"
	resultType="Auction">
select * from
	(select rownum rnum , 	AUC_NUMBER , AUC_SUBJECT , 
	AUC_DATE ,AUC_PRICE ,AUC_COUNT ,SAVE_AUC_MAINFILE , AUC_SPRICE
		from(
		select * from Deal_Auction
		where AUC_SUBJECT like #{search_word}
		order by AUC_NUMBER desc
		))
	 where rnum &gt;= #{start} and rnum  &lt;=  #{end}
	 
</select>
	
<select id="detail" parameterType="int" resultType="Auction">
	select *
	from deal_auction
	where AUC_NUMBER = #{number}

</select>

<update id="pricemodi" parameterType="Auction">
		update deal_auction
		set
		AUC_price = Auc_price + #{AUC_UNIT},
		AUC_COUNT = AUC_COUNT +1 
		where AUC_NUMBER=#{AUC_NUMBER}
</update>





</mapper>